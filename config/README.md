# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è SM2

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –∫–æ–Ω—Ñ–∏–≥.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `global.json` | –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `auth.json` | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ |
| `pyrus.json` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pyrus API |
| `kp.json` | –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è |
| `meetings.json` | –ú–æ–¥—É–ª—å –≤—Å—Ç—Ä–µ—á |
| `calendar.json` | –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ UI |
| `departments.json` | –ú–∞–ø–ø–∏–Ω–≥ –æ—Ç–¥–µ–ª–æ–≤ –∏ –ª–∏–Ω–∏–π |

---

## üåê global.json

–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–æ –≤—Å—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

```json
{
  "graphHookUrl": "https://...",  // URL –≤–µ–±—Ö—É–∫–∞ –¥–ª—è GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤
  "routeAccess": {                // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ—É—Ç–∞–º (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ = –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º)
    "work": [],
    "meet": [],
    "kp": [],
    "gantt": []
  }
}
```

---

## üîê auth.json

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `methods.loginPassword.enabled` | boolean | –í–∫–ª—é—á–∏—Ç—å –≤—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é |
| `methods.emailOtp.enabled` | boolean | –í–∫–ª—é—á–∏—Ç—å –≤—Ö–æ–¥ –ø–æ OTP –Ω–∞ email |
| `ttlMs` | number | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏ (–º—Å) |
| `codeLength` | number | –î–ª–∏–Ω–∞ OTP-–∫–æ–¥–∞ |
| `resendTimerSec` | number | –í—Ä–µ–º—è –¥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ (—Å–µ–∫) |
| `uiTexts` | object | –¢–µ–∫—Å—Ç—ã –¥–ª—è UI —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ |
| `webhooks.emailInit` | string | URL –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OTP |
| `webhooks.emailVerify` | string | URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ OTP |
| `rolePermissions` | object | –ú–∞–ø–ø–∏–Ω–≥ —Ä–æ–ª–µ–π –Ω–∞ ID –ø—Ä–∞–≤ |

---

## üìä pyrus.json

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pyrus (–∫–∞—Ç–∞–ª–æ–≥–∏, —Ñ–æ—Ä–º—ã, –ø–æ–ª—è).

### catalogs
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ Pyrus.

| –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `catalogs.shifts.id` | ID –∫–∞—Ç–∞–ª–æ–≥–∞ —Å–º–µ–Ω (281369) |
| `catalogs.shifts.columns.department` | –ò–Ω–¥–µ–∫—Å –∫–æ–ª–æ–Ω–∫–∏ "–û—Ç–¥–µ–ª" |

### forms
ID —Ñ–æ—Ä–º Pyrus.

| –ü–æ–ª–µ | ID —Ñ–æ—Ä–º—ã | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|------------|
| `otpusk` | 2348174 | –§–æ—Ä–º–∞ –æ—Ç–ø—É—Å–∫–æ–≤ |
| `smeni` | 2375272 | –§–æ—Ä–º–∞ —Å–º–µ–Ω |
| `form_meet` | 1382379 | –§–æ—Ä–º–∞ –≤—Å—Ç—Ä–µ—á |

### fields
–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–æ—Ä–º—ã.

```json
{
  "otpusk": { "person": 1, "period": 2 },
  "smeni": { "person": 8, "due": 4, "amount": 5, "template": 10 },
  "form_meet": { "subject": 1, "due": 4, "responsible": 27, ... }
}
```

---

## üìù kp.json

–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–ö–ü).

### company
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è —à–∞–ø–∫–∏ –ö–ü.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `name` | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |
| `address` | –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å |

### avatarSize
–†–∞–∑–º–µ—Ä –∞–≤–∞—Ç–∞—Ä–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (160).

### catalogs
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ Pyrus –¥–ª—è –ö–ü.

| –ö–∞—Ç–∞–ª–æ–≥ | ID | –ö–æ–ª–æ–Ω–∫–∏ |
|---------|-----|---------|
| `services` | 265029 | nameIndex, priceIndex, autoDiscountIndex |
| `maintenance` | 228631 | frontsIndex, totalIndex, unitIndex |
| `licenses` | 282333 | nameIndex, descriptionIndex, fallbackNameIndex, smPriceIndex |
| `trainings` | 265027 | nameIndex, priceIndex |
| `consumables` | 265028 | nameIndex, priceIndex |

### defaults
–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|----------|
| `validDays` | –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ö–ü (–¥–Ω–∏) | 3 |
| `maintenanceMonths` | –ú–µ—Å. —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ | 3 |

### forms
–§–æ—Ä–º—ã Pyrus –¥–ª—è –ö–ü.

| –§–æ—Ä–º–∞ | ID | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|-----|------------|
| `crm.formId` | 2305023 | –§–æ—Ä–º–∞ CRM-—Å–¥–µ–ª–æ–∫ |
| `equipment.formId` | 2386773 | –§–æ—Ä–º–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è |

### discounts
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∏–¥–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É.

```json
{ "min": 1, "max": 1, "percent": 0 }
{ "min": 2, "max": 2, "percent": 25 }
{ "min": 3, "max": 9, "percent": 40 }
{ "min": 10, "max": null, "percent": 50 }
```

### n8n
–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã n8n –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏.

| –ö–ª—é—á | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `uploadKp` | –ó–∞–≥—Ä—É–∑–∫–∞ HTML –ö–ü |
| `getKp` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ö–ü |
| `pyrusFiles` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ Pyrus |
| `pyrusAvatar` | –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ |

### tax
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ù–î–°.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `rate` | –°—Ç–∞–≤–∫–∞ –ù–î–° (20%) |
| `included` | –ù–î–° –≤–∫–ª—é—á–µ–Ω –≤ —Ü–µ–Ω—É |

---

## üìÖ meetings.json

–ú–æ–¥—É–ª—å –≤—Å—Ç—Ä–µ—á.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `formId` | ID —Ñ–æ—Ä–º—ã –≤—Å—Ç—Ä–µ—á –≤ Pyrus (1382379) |
| `fields.subject` | –ü–æ–ª–µ "–¢–µ–º–∞" |
| `fields.dueDateTime` | –ü–æ–ª–µ "–î–∞—Ç–∞/–≤—Ä–µ–º—è" |
| `fields.residentsTable` | –¢–∞–±–ª–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| `fields.residentCellPerson` | –Ø—á–µ–π–∫–∞ "–£—á–∞—Å—Ç–Ω–∏–∫" |
| `fields.postLink` | –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ—Å—Ç |
| `fields.status` | –°—Ç–∞—Ç—É—Å –≤—Å—Ç—Ä–µ—á–∏ |
| `fields.responsible` | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π |
| `fields.isOffline` | –§–ª–∞–≥ –æ—Ñ–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏ |

---

## üóì calendar.json

–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Ü–≤–µ—Ç–∞.

### prodCal
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –†–§.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `ttlMs` | –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (30 –¥–Ω–µ–π) |
| `urlTemplate` | –®–∞–±–ª–æ–Ω URL isdayoff.ru |
| `cacheKeyPrefix` | –ü—Ä–µ—Ñ–∏–∫—Å –∫–ª—é—á–∞ –∫—ç—à–∞ |

### ui
–¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–Ω–µ–π (light/dark —Ç–µ–º–∞).

| –¢–∏–ø –¥–Ω—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `workday` | –†–∞–±–æ—á–∏–π –¥–µ–Ω—å |
| `weekend` | –í—ã—Ö–æ–¥–Ω–æ–π (—Å–±/–≤—Å) |
| `holiday` | –ü—Ä–∞–∑–¥–Ω–∏–∫ |
| `preholiday` | –ü—Ä–µ–¥–ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π |

### indicators
–¶–≤–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `birthdayBg` | –§–æ–Ω –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è |
| `birthdayText` | –¢–µ–∫—Å—Ç –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è |

---

## üè¢ departments.json

–ú–∞–ø–ø–∏–Ω–≥ –æ—Ç–¥–µ–ª–æ–≤ –Ω–∞ –ª–∏–Ω–∏–∏.

### byLine
–ú–∞–ø–ø–∏–Ω–≥ –ª–∏–Ω–∏–∏ ‚Üí ID –æ—Ç–¥–µ–ª–æ–≤ Pyrus.

```json
{
  "L1": [108368027],
  "L2": [108368026, 171248779, 171248780],
  "OV": [80208117],
  "OP": [108368021, 157753518, 157753516],
  "OU": [108368030],
  "AI": [166353950]
}
```

### orderByLine
–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –æ—Ç–¥–µ–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ª–∏–Ω–∏–∏.

### byName / orderByName
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –æ—Ç–¥–µ–ª–æ–≤.

---

## üîó –ö–∞–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å

```javascript
// –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
import kpConfig from '../../config/kp.json' with { type: 'json' };
import globalConfig from '../../config/global.json' with { type: 'json' };

const validDays = kpConfig.defaults?.validDays ?? 10;
const hookUrl = globalConfig.graphHookUrl;
```
